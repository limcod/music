<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="lib/static/css/main.css">
</head>
<body>
<div id="app" style="display: none;" :style="'--theme:'+themeColor">
    <keep-alive :max="10">
        <component v-if="IComponent&&IComponent.keepAlive" :is="IComponent.name" :ref="IComponent.name"></component>
    </keep-alive>
    <component v-if="IComponent&&!IComponent.keepAlive" :is="IComponent.name" :ref="IComponent.name"></component>
</div>
<div id="dialog" style="display: none;" class="drag" :style="'--theme:'+themeColor">
    <keep-alive :max="10">
        <component v-if="IComponent&&IComponent.keepAlive" :is="IComponent.name" :ref="IComponent.name"></component>
    </keep-alive>
    <component v-if="IComponent&&!IComponent.keepAlive" :is="IComponent.name" :ref="IComponent.name"></component>
    <dialog-global-head v-if="IComponent" v-bind:IComponentName="IComponent.name"
                        ref="dialog-head"></dialog-global-head>
</div>
<div id="menu" style="display: none;width: 100%;height: 100%;" class="no-drag" :style="'--theme:'+themeColor">
    <keep-alive :max="10">
        <component v-if="IComponent&&IComponent.keepAlive" :is="IComponent.name" :ref="IComponent.name"></component>
    </keep-alive>
    <component v-if="IComponent&&!IComponent.keepAlive" :is="IComponent.name" :ref="IComponent.name"></component>
</div>
<!-- //unpkg.com/vue/dist/vue.esm.browser.min.js -->
<script type="module">
    import Vue from './lib/vue.esm.browser.min.js';

    require('electron').ipcRenderer.on('dataJsonPort', async (event, e) => {
        e = JSON.parse(decodeURIComponent(e));
        document.title = require('electron').remote.app.name;
        document.getElementById(e.el).style.display = null;
        if (e.el === 'menu') {
            document.body.setAttribute('class', 'drag');
            document.body.onmouseleave = () => window.close();
        }
        require('./lib/view').vue(Vue, e.el, e.data).then(lib => new Vue(lib))
    });
</script>
</body>
</html>
